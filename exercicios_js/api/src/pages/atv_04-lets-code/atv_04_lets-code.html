<!DOCTYPE html>
<html lang="en">

<head>
	<style id="stl">
		:root {
			--bg: #222222;
			--bg2: #333333;
			--bg3: #444444;
			--bg4: #555555;
			--bg5: #535353;


			--softBg: #999999;
			--txt: #eeeedd;

			--tint01: #ee22ee;
			--tint02: #552255;

			--red: #bb3030;
			--green: #11ee11;
			--golden: #ffff11;

			background-color: var(--bg);
		}

		* {
			background-color: transparent;
			color: var(--txt);
			font-family: lato, sans-serif;


			border-style: solid;
			border-width: 0px;
			border-radius: 12px;

		}

		div {
			color: inherit;
			font-size: inherit;
		}

		h1 {
			background-color: #aabbcc00;
			font-size: 32px;
			color: var(--txt);
		}

		h2 {
			background-color: #aabbcc00;
			font-size: 20px;
			color: var(--txt);
		}

		h3 {
			background-color: #aabbcc00;
			font-size: 20px;
			color: var(--txt);
		}

		p,
		h4 {
			background-color: #aabbcc00;
			font-size: 14px;
			color: var(--txt);
		}




		.in {
			border-color: var(--softBg);
			border-style: solid;
			border-width: 2px;
			border-radius: 5px;

			margin-left: 20px;
			margin-right: 20x;
			margin-top: 10px;
			margin-bottom: 10px;

			height: 30px;
			width: 50;

			font-size: 16px;

			background-color: var(--txt);
			color: var(--bg);
		}

		::placeholder {
			color: var(--tint010);
			font-size: 12px;


		}

		[x]::placeholder {
			color: red;
			font-size: 16px;
		}

		.btn {
			color: var(--txt);
			background-color: var(--bg4);
			border-color: var(--txt);
			border-style: solid;
			border-width: 1px;
			border-radius: 8px;

			margin-left: 5px;
			margin-right: 5px;
			margin-top: auto;
			margin-bottom: auto;

			min-height: 35px;
			min-width: 35px;
			transition: background-color 0.2s;
		}

		.btn[del] {
			color: var(--red);
			border-width: 3px;
			font-weight: 700;
			border-color: var(--red);
			border-radius: 5px;


		}

		.btn:hover {
			background-color: var(--bg2);
		}

		.bord {
			border-color: var(--txt);
			border-style: solid;
			border-width: 1px;
			border-radius: 12px;
			background-color: #aabbcc00;
		}

		.row {
			text-align: center;
			display: flex;
			flex-direction: row;

		}

		.col {
			flex: 1;
			text-align: center;
			display: flex;
			flex-direction: column;

			align-items: center;
		}

		.q_input {
			margin-left: auto;
			margin-right: auto;
			width: 60%;

		}

		.item {
			flex: 1;
			margin: 2px;
			display: flex;
			vertical-align: center;
			vertical-align: middle;

		}

		.qBtn {
			flex-direction: column;
			justify-content: center;
			align-items: center;
			min-width: 400px;
			margin-top: 5px;
		}

		.out {
			background-color: #999999;
		}

		td {
			background-color: #aabbcc00;
			border-radius: 3px;
			border: 2px solid;
			margin-left: auto;

			margin-left: auto;
			margin-right: auto;
		}

		.transp {
			background-color: #aabbcc00;
		}

		.hcent {
			margin-left: auto;
			margin-right: auto;
		}

		.vcent {
			margin-top: auto;
			margin-bottom: auto;
		}

		.lrg {
			width: 200px;
			padding: 5px;

		}

		.it {
			background-color: transparent;
			width: 100%;
			min-width: 300px;
			max-width: 400px;
			height: 30px;

			margin-bottom: 1px;
			
			border-radius: 4px;

			display: flex;
			flex-direction: row;
			max-width: 100px;
			margin-left: auto;
			margin-right: auto;

			transition: background-color 0.3s;
		}

		.it:hover {
			background-color: red;
		}


		.it_detail {
			display: block;
			background-color: inherit;
			min-height: 100px;
			width: 300px;

			display: flex;
			justify-content: space-evenly;

		}

		.it_detail.hdn {
			display: none;
		}

		.dt_it {
			font-size: 14px;
			color: var(--bg);
			margin: 1px;
			background-color: transparent;
			color: inherit;
			justify-content: center;
			flex: 1;
		}


		.cat_card {
			background-color: var(--bg3);
			color: var(--tint01);
			border-color: var(--tint01);
			border-width: 2px;

			flex: 1;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;

			margin-top: 8px;
			margin-bottom: 8px;

			max-height: 100px;
			width: 94%;
			max-width: 240px;
			min-width: 100px;
			transition: background-color 0.3s, max-width 0.3s, color 0.2s;
		}

		.cat_card:hover {
			background-color: var(--tint01);
			color: var(--txt) max-width: 230px;
		}

		.terrain_it {
			flex: 1;
			display: flex;
			background-color: var(--tint01);
			flex-direction: column;
			justify-content: center;
			align-items: center;
		}
	</style>

	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />


	<title>Atividade 03 Lets-Code</title>
</head>

<body id="body" class="bord" style="width:95%;">
	<div class="col bord " style="min-height: 580px; width: 100%; ">


		<h1 class="bord" style="
				width: 50%;
				color:var(--bg);
				background-color:var(--txt);
				padding:5px;
				
			" onclick="show_cache()">TO DO LIST</h1>

		<div id="board" class="col bord" style="
					background-color: var(--softBg);
					width: 90%;
					height: 400px;
					min-height: 340px;
					border-width: 3px; margin-bottom: 20px;
					flex-direction: row;
					">
			<div id="categs" class="col" style="
					background-color: var(--tint02);
					max-width: 20%;
					margin-right: auto;
					margin-top: auto;
					margin-bottom: auto;
					
					
					height: 400px;
					">
			</div>
			<div id="categ" class="col" style="
					background-color: transparent;
					width: 40%;
					margin-right: auto;
					margin-top: auto;
					margin-bottom: auto;
					flex:1;
					
					
					height: 400px;
					">
			</div>
		</div>
	</div>
</body>
<script>



	class Dt {
		#Y;
		#M;
		#D;
		#h;
		#m;
		#s;
		#ms;

		number = function () {
			return 100;
		};
		get() {
			return {
				"Y": this.#Y,
				"M": this.#M,
				"D": this.#D,
				"h": this.#h,
				"m": this.#m,
				"s": this.#s,
				"ms": this.#ms,
				"txt": `${this.#Y}/${this.#M}/${this.#D} - ${this.#h}:${this.#m}:${this.#s},${this.#ms}`

			}

		}


		constructor(...args) {
			let inp = '';
			if (typeof args[0] == 'number') inp = args[0] + '';
			console.log('Date: ', inp.substring(0, 4));
			this.#Y = +inp.substring(0, 4)
			this.#M = +inp.substring(4, 6)
			this.#D = +inp.substring(6, 8)
			this.#h = +inp.substring(8, 10)
			this.#m = +inp.substring(10, 12)
			this.#s = +inp.substring(12, 14)
			this.#ms = +inp.substring(14, 17)


		}

	}

	let lib = [];
	let categories = ['cat_001', 'cat_002', 'cat_003', 'cat_004'];
	let terreno = [];
	class Activity {
		#id = 0;
		getId = function () { return this.#id };
		setId = function (val) {
			if (typeof val != 'number') return;
			this.#id = val;
		};
		static n_of_activities = 0;

		#creationDate;
		getCreationDate = function () { return this.#creationDate };
		#dueDate;
		getDueDate = function () { return this.#dueDate };
		setDueDate = function (val) {
			if (typeof val != 'number') return;
			this.#dueDate = val;
		};


		#title;
		getTitle = function () { return this.#title };
		setTitle = function (val) {
			if (typeof val != 'number') return;
			this.#title = val;
		};
		#description;
		getDescription = function () { return this.#description };
		#category;
		getCategory = function () { return this.#category };
		#priority;
		getPriority = function () { return this.#priority };
		#stage;
		getStage = function () { return this.#stage };
		setStage = function (val) {
			if (typeof val != 'number') return;
			this.#stage = val;
		};

		self = function () {
			let inf = {};
			inf.id = getId();
			inf.description = getDescription();
			inf.category = getCategory();
			inf.priority = getPriority();
			inf.creationDate = getCreationDate();
			inf.dueDate = getDueDate();
			inf.stage = getStage();
			return inf;
		}
		info = function () {
			return `{
				"id": 			'${this.getId()}',
				"description":  '${this.getDescription()}',
				"category": 	'${this.getCategory()}',
				"priority":		'${this.getPriority()}',
				"creationDate": '${this.getCreationDate()}',
				"dueDate": 	    '${this.getDueDate()}',
				"stage":	    '${this.getStage()}'
			}`;

		}

		constructor(title, description, category, priority = 3, due_date = new Dt(), stage = 0) {
			console.log('>', title)
			this.#title = title ? title : 'titulo' + Activity.n_of_activities;
			this.#category = category;
			if (!categories.includes(category)) categories.push(category);
			this.#description = description;
			this.#priority = priority;
			this.#dueDate = due_date;
			this.#stage = stage;

			Activity.n_of_activities++;
			this.#id = Activity.n_of_activities + 1000;
			//console.log('inst> ', this);

		}

	}

	function range(x) {
		R = [];
		for (let i = 0; i < x; i++) R.push(i);
		return R;
	}


	start_lib();
	function start_lib() {
		for (let i of range(30)) {
			lib.push(new Activity(
				'TITULO_' + (i + 44),//title
				'descr_00' + i,//description
				categories[Math.floor((Math.random() * 10) % categories.length)],//categ
				(i + 3 > 4) ? i + 3 : 4,//prioridade,
				new Dt(Math.floor(Math.random() * 100000000000000)),//due dt
				(Math.floor((Math.random() * 10)) % 2) ? 0 : 2)//estagio
			)
			console.log(lib[lib.length - 1])
		}

		show_all();
	}

	function showList(L) {
		let r = `<h3> Tarefas </h3>`;
		let i = 0;
		for (let el of L) {
			let due_date = el.getDueDate().get();
			
			let id = `it_${el.getId()}`
			r += `
		<span 
			id="${id}"  style="border-color: blue" 
			onclick="expand_it_details('it_detail_${id}')">
			<div class='it bord' 
				style="
				${!i?'':'margin-top: 20px;'}
			
				background-color: ${i & 1 ? 'var(--bg5)' : 'var(--softBg)'};
				border-color: ${i & 1 ? 'var(--softBg)' : 'var(--bg5)'};
				color: ${i & 1 ? 'var(--softBg)' : 'var(--bg5)'};
				padding-top: auto;
				padding-bottom: auto;
				
				">
				<div 
					style="
					color:inherit;
					padding:2px;
					flex:1;
					max-width: 30px;
					margin-top: auto;
					margin-bottom: auto;
					margin-right: 15px
					"
				>${el.getId()}</div>
				<div 
					style="
					flex:1;
					max-width: 80px;
					font-size: 12px;
					margin-left: 2px;
					margin-top:auto;
					margin-bottom: auto
					"
				>${el.getTitle()}</div>
				<div 
					style="
					flex:1;
					font-size: 12px;
					margin-left: 4px;
					margin-top:auto;
					margin-bottom: auto
					"
				>${due_date.D} / ${due_date.M} / ${due_date.Y}</div>
				<div 
					style="
					flex:1;
					max-width: 80px;
					font-size: 12px;
					margin-left: 2px;
					margin-top:auto;
					margin-bottom: auto
					"
				>${el.getCategory()}</div>
			</div>
			<span id="it_detail_${id}" class="it_detail col bord"
			style= "
				border-color: ${i & 1 ? 'var(--softBg)' : 'var(--bg5)'};
				background-color: ${i & 1 ? 'var(--bg5)' : 'var(--softBg)'};
				color: ${i & 1 ? 'var(--softBg)' : 'var(--bg5)'};
			"
			>
				<span class='dt_it row' 
					style="
					width: 290px;
					">
					<span filler style="flex:1; min-width:45px;max-width:45px; " ></span>
						
					<span style="color:inherit;flex:1">
						${due_date.D}/${due_date.M}/${due_date.Y}
					</span>
					
					<span filler style="flex:1; min-width:5px;max-width:8px; " ></span>
					
					<span style="color:inherit; flex:1">
							${due_date.h}:${due_date.m}:${due_date.s}
					</span>
					
					<span filler style="flex:1; min-width:45px;max-width:45px; " ></span>
					
						
				</span>
				<span class='dt_it'>
						a
				</span>
				<span class='dt_it'>
						a
				</span>
				

				
			</span>
		</span>
		`;
			i++;
		}
		document.getElementById('categ').innerHTML = r;


	}


	function show_all() {
		showCategoryList();
		showList(lib);


	}

	function showCategoryList() {
		//console.log(document.getElementById('field'));
		let r = `<h2> Categorias </h2>`;
		for (let cat of categories) {
			r += `
				<div class="cat_card" onclick="showCategory('${cat}')"> 
					<p style="color:inherit; font-weight: 900">
						${cat}
					</p>
					<span class='cat_btn_marker_container'></span>
				`;

			r += '</div> \n';
		}
		document.getElementById('categs').innerHTML = r;
	}


	let cache = {
		"queries": {


		}

	}
	function show_cache() {
		console.clear();
		console.log('CACHE> ', cache);
	}




	function showCategory(category = '${cat}') {
		console.log('CAT>> ', category);
		console.log('cat> ', categories.indexOf(category), categories[categories.indexOf(category)]);
		//check if already exists on cache

		//mount list
		let L = [];
		if (cache.queries[category]) {
			L = cache.queries['category=' + category];
		}
		else {
			for (let atv of lib)
				if (atv.getCategory() === category) L.push(atv);
			console.log('>1>', L);
			cache.queries['category=' + category] = [...L];
		}
		showList(L);
	}

	function expand_it_details(id, el) {

		console.log('>> ', id)


	}


	/*
	
	Atividade 04:
	PRINCIPAL (700XP)
	- Utilizar obrigatoriamente typescript no lugar de js para este trabalho;
	
	- Criar uma aplicação para Adição, Remoção e Atualização de uma TODO LIST (Lista de Afazeres);
	- Os afazeres devem poder ser separados em categorias (podem olhar como o site Todoist é feito);
	- Deve ser alterado o status da tarefa para "feita" através de um checkbox;
	- Deve haver uma data associada a cada tarefa e todas elas devem ser salvas no Storage.
	
	EXTRA (200XP)
	- O usuário deve ser avisado quando a tarefa estiver atrasada (alert ou algo do tipo);
	- Montem usando OO ao invés de programação funcional.
	
	
	
	*/




</script>

</html>